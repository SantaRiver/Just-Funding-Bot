# üíé –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –ü–æ–∏—Å–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–Ω–∏—Ü—ã funding rates –º–µ–∂–¥—É –±–∏—Ä–∂–∞–º–∏.

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **services/aggregator.py**
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `find_hedging_opportunities(min_spread)` - –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–∫–µ–Ω—ã —Å –±–æ–ª—å—à–æ–π —Ä–∞–∑–Ω–∏—Ü–µ–π —Å—Ç–∞–≤–æ–∫ –º–µ–∂–¥—É –±–∏—Ä–∂–∞–º–∏
   
2. **services/formatter.py**
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `format_hedging_opportunities()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

3. **bot.py**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/hedge` —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º `hedge_command()`
   - –û–±–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `/start` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥–µ
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω handler –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

4. **README.md**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–∞–Ω–¥–µ `/hedge` –≤ —Ç–∞–±–ª–∏—Ü—É –∫–æ–º–∞–Ω–¥
   - –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥—ã
   - –û–±–Ω–æ–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"

5. **docs/HEDGING_GUIDE.md** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏—è
   - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ —Ä–∞–±–æ—Ç—ã
   - –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–æ–≤ –ø—Ä–∏–±—ã–ª–∏
   - –†–∏—Å–∫–∏ –∏ –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã
   - –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞

1. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–æ–ø-10 —Ç–æ–∫–µ–Ω–∞–º –æ—Ç –≤—Å–µ—Ö –±–∏—Ä–∂
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç **–º–∏–Ω–∏–º–∞–ª—å–Ω—É—é** –∏ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é** funding rate
3. –í—ã—á–∏—Å–ª—è–µ—Ç **—Å–ø—Ä–µ–¥** (—Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –Ω–∏–º–∏)
4. –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É —Å–ø—Ä–µ–¥—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.3%)
5. –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Å–ø—Ä–µ–¥–∞
6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ø-5 –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è

- **LONG** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –±–∏—Ä–∂–µ —Å **—Å–∞–º–æ–π –Ω–∏–∑–∫–æ–π** (–∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π) —Å—Ç–∞–≤–∫–æ–π
- **SHORT** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –±–∏—Ä–∂–µ —Å **—Å–∞–º–æ–π –≤—ã—Å–æ–∫–æ–π** —Å—Ç–∞–≤–∫–æ–π
- **–ü—Ä–∏–±—ã–ª—å** = —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Å—Ç–∞–≤–∫–∞–º–∏ √ó —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã

```bash
/hedge                # –ü–æ–∏—Å–∫ —Å–æ —Å–ø—Ä–µ–¥–æ–º ‚â•0.3% (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
/hedge 0.5            # –ü–æ–∏—Å–∫ —Å–æ —Å–ø—Ä–µ–¥–æ–º ‚â•0.5%
/hedge 1.0            # –ü–æ–∏—Å–∫ —Å–æ —Å–ø—Ä–µ–¥–æ–º ‚â•1.0%
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üíé –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –î–õ–Ø –•–ï–î–ñ–ò–†–û–í–ê–ù–ò–Ø
–ù–∞–π–¥–µ–Ω–æ: 3 | –ü–æ–∫–∞–∑–∞–Ω–æ —Ç–æ–ø-3
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

üî• 1. BTC
üìä –°–ø—Ä–µ–¥: 1.2500%
üí∞ –¶–µ–Ω–∞: $68,234

üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏—è:
üìà LONG –Ω–∞ BINANCE: -0.0500%
üìâ SHORT –Ω–∞ MEXC: +1.2000%

üíµ –ü—Ä–∏–±—ã–ª—å –∑–∞ —Ü–∏–∫–ª: ~1.2500%
‚è∞ –î–æ funding: 2—á 15–º–∏–Ω

–ë–∏—Ä–∂–∞     ‚îÇ Rate
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
BINANCE   ‚îÇ -0.0500% üìà
BYBIT     ‚îÇ +0.5234%
MEXC      ‚îÇ +1.2000% üìâ

üìä –°—Å—ã–ª–∫–∏:
  ‚Ä¢ BINANCE (LONG): –û—Ç–∫—Ä—ã—Ç—å ‚Üó
  ‚Ä¢ MEXC (SHORT): –û—Ç–∫—Ä—ã—Ç—å ‚Üó
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ú–µ—Ç–æ–¥ find_hedging_opportunities()

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `services/aggregator.py`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `min_spread` (float, default=0.3) - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–ø—Ä–µ–¥ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `List[Dict]` —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
```python
{
    'token': str,                # –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (BTC, ETH, etc)
    'spread': float,             # –°–ø—Ä–µ–¥ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
    'long_exchange': str,        # –ë–∏—Ä–∂–∞ –¥–ª—è LONG –ø–æ–∑–∏—Ü–∏–∏
    'long_rate': FundingRate,    # –û–±—ä–µ–∫—Ç FundingRate –¥–ª—è LONG
    'short_exchange': str,       # –ë–∏—Ä–∂–∞ –¥–ª—è SHORT –ø–æ–∑–∏—Ü–∏–∏
    'short_rate': FundingRate,   # –û–±—ä–µ–∫—Ç FundingRate –¥–ª—è SHORT
    'all_rates': List[FundingRate]  # –í—Å–µ —Å—Ç–∞–≤–∫–∏ –æ—Ç –≤—Å–µ—Ö –±–∏—Ä–∂
}
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ `get_grouped_by_token()`:
- **TTL**: 30 —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–ó–∞—â–∏—Ç–∞**: Thundering Herd Protection
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∏—Ä–∂–∞–º

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ù–∞–π—Ç–∏ –ª—é–±—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–º–∏–Ω–∏–º—É–º 0.3%)

```
/hedge
```

### 2. –ù–∞–π—Ç–∏ —Ö–æ—Ä–æ—à–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–º–∏–Ω–∏–º—É–º 0.5%)

```
/hedge 0.5
```

### 3. –ù–∞–π—Ç–∏ –æ—Ç–ª–∏—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–º–∏–Ω–∏–º—É–º 1.0%)

```
/hedge 1.0
```

## üìä –†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏ (–ø—Ä–∏–º–µ—Ä)

**–î–∞–Ω–æ**:
- –¢–æ–∫–µ–Ω: BTC
- –°–ø—Ä–µ–¥: 1.25%
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏: $10,000 –Ω–∞ –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–µ
- Funding rate –Ω–∞ BINANCE (LONG): -0.05%
- Funding rate –Ω–∞ MEXC (SHORT): +1.20%

**–ü—Ä–∏–±—ã–ª—å –∑–∞ 1 funding**:
```
–ù–∞ BINANCE (LONG, -0.05%): –ø–æ–ª—É—á–∞—é +$5 (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ = –ø–æ–ª—É—á–∞—é)
–ù–∞ MEXC (SHORT, +1.20%): –ø–æ–ª—É—á–∞—é +$120 (–ø—Ä–∏ SHORT –ø–æ–ª—É—á–∞—é –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç–∞–≤–∫—É)
–ò—Ç–æ–≥–æ: $125 (1.25%)
```

**–ü—Ä–∏–±—ã–ª—å –∑–∞ –¥–µ–Ω—å** (3 funding):
```
$125 √ó 3 = $375
```

**–ì–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å**:
```
1.25% √ó 3 √ó 365 = 1,368.75%
```

‚ö†Ô∏è –≠—Ç–æ –∏–¥–µ–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç –±–µ–∑ —É—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–π –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞–≤–æ–∫!

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

1. **–ö–æ–º–∏—Å—Å–∏–∏** - –≤—Å–µ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ –∏ funding fees
2. **–ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ** - –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º
3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫** - funding rates –º–µ–Ω—è—é—Ç—Å—è –∫–∞–∂–¥—ã–π —Ü–∏–∫–ª
4. **–†–∏—Å–∫ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∏–∑–∫–æ–µ –ø–ª–µ—á–æ (1x-3x)
5. **–†–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è funding** - —É —Ä–∞–∑–Ω—ã—Ö –±–∏—Ä–∂ —Ä–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
6. **–õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≥–ª—É–±–∏–Ω—É —Å—Ç–∞–∫–∞–Ω–∞ –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `python bot.py`
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É: `/hedge`
3. –ò–∑—É—á–∏—Ç–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: [docs/HEDGING_GUIDE.md](docs/HEDGING_GUIDE.md)
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∞–ª—ã—Ö —Å—É–º–º–∞—Ö
5. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–±—É–¥—É—â–∏–µ —Ñ–∏—á–∏)

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –≤—ã–≥–æ–¥–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- [ ] –£—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π –±–∏—Ä–∂ –≤ —Ä–∞—Å—á–µ—Ç–µ –ø—Ä–∏–±—ã–ª–∏
- [ ] –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–ø—Ä–µ–¥–∞–º
- [ ] –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–∏–±—ã–ª–∏ —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –±–∏—Ä–∂–∞–º
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Å–Ω–æ–≤–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](README.md)
- [–ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ —Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏—é](docs/HEDGING_GUIDE.md)
- [–°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è](docs/CACHE_SYSTEM.md)
- [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](docs/LOGGING.md)

---

**–ü—Ä–∏—è—Ç–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏! üíéüöÄ**
