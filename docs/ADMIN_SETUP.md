# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –∫—ç—à–∞

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ .env

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cp .env.example .env
```

### 2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# Cache Configuration
CACHE_TTL=30  # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30)

# Admin Configuration
ADMIN_USER_ID=123456789  # –í–∞—à Telegram User ID
```

## üÜî –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram User ID

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –±–æ—Ç–∞ @userinfobot

1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –û–Ω –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞—à–∏–º ID

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –±–æ—Ç–∞ @raw_data_bot

1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ [@raw_data_bot](https://t.me/raw_data_bot)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –í –æ—Ç–≤–µ—Ç–µ –Ω–∞–π–¥–∏—Ç–µ `"id": 123456789`

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ –ª–æ–≥–∏ –±–æ—Ç–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±—É—é –∫–æ–º–∞–Ω–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä `/start`)
3. –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç: `User 123456789 started the bot`

## üîê –ö–æ–º–∞–Ω–¥—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `ADMIN_USER_ID` —Ç–æ–ª—å–∫–æ —ç—Ç–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### `/cache_stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –¢–µ–∫—É—â–∏–π TTL
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫—ç—à–µ
- –í–æ–∑—Ä–∞—Å—Ç –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏
- –°—Ç–∞—Ç—É—Å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

‚öôÔ∏è Cache TTL: 30—Å
üì¶ –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: 2
‚úÖ –í–∞–ª–∏–¥–Ω—ã—Ö: 1
‚ùå –ò—Å—Ç–µ–∫—à–∏—Ö: 1

–ó–∞–ø–∏—Å–∏ –≤ –∫—ç—à–µ:
‚úÖ grouped_by_token:5
   –í–æ–∑—Ä–∞—Å—Ç: 15.3—Å / TTL: 30—Å
```

### `/clear_cache` - –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à

–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç –∫—ç—à. –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –≤—ã–∑–æ–≤–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

**–û—Ç–≤–µ—Ç:**
```
‚úÖ –ö—ç—à –æ—á–∏—â–µ–Ω
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cache TTL

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

| –°—Ü–µ–Ω–∞—Ä–∏–π | TTL | –ü–æ—á–µ–º—É |
|----------|-----|--------|
| **Dev/Testing** | 10-15 —Å–µ–∫ | –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **–ú–∞–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (<10)** | 30 —Å–µ–∫ | –ë–∞–ª–∞–Ω—Å |
| **–°—Ä–µ–¥–Ω–µ (10-100)** | 30-60 —Å–µ–∫ | –ó–∞—â–∏—Ç–∞ –æ—Ç burst |
| **–ú–Ω–æ–≥–æ (>100)** | 60-120 —Å–µ–∫ | –ú–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ |
| **–û—á–µ–Ω—å –º–Ω–æ–≥–æ (>1000)** | 120-300 —Å–µ–∫ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ |

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–î–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```env
CACHE_TTL=30
```

**–î–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –±–æ—Ç–∞:**
```env
CACHE_TTL=60
```

**–î–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞:**
```env
CACHE_TTL=120
```

## üö´ –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ –ø—Ä–∞–≤ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /cache_stats
–ë–æ—Ç: ‚ùå –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã
```

–í –ª–æ–≥–∞—Ö:
```
WARNING - User 987654321 attempted to access cache_stats without admin rights
```

### –ï—Å–ª–∏ ADMIN_USER_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /cache_stats
–ë–æ—Ç: ‚ùå –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã
```

–í –ª–æ–≥–∞—Ö:
```
WARNING - ADMIN_USER_ID not set - admin commands are disabled
WARNING - User 123456789 attempted to access cache_stats without admin rights
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω—Å–∫–∏–º –∫–æ–º–∞–Ω–¥–∞–º –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

**–£—Å–ø–µ—à–Ω—ã–π –¥–æ—Å—Ç—É–ø:**
```
INFO - Cache cleared by admin user 123456789
```

**–ù–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞:**
```
WARNING - User 987654321 attempted to clear cache without admin rights
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

‚úÖ **DO:**
- –•—Ä–∞–Ω–∏—Ç–µ `.env` –≤ `.gitignore`
- –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Å–≤–æ–π `ADMIN_USER_ID`
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ú–µ–Ω—è–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –ø—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏

‚ùå **DON'T:**
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ git
- –ù–µ –¥–µ–ª–∞–π—Ç–µ –∞–¥–º–∏–Ω–æ–º —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–π—Ç–µ —Å–≤–æ–π User ID –ø—É–±–ª–∏—á–Ω–æ

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ò–∑–º–µ–Ω–∏—Ç—å TTL

1. –û—Ç–∫—Ä–æ–π—Ç–µ `.env`
2. –ò–∑–º–µ–Ω–∏—Ç–µ `CACHE_TTL=30` –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
4. –í –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏—Ç–µ: `INFO - Cache TTL set to: 60 seconds`

### –ò–∑–º–µ–Ω–∏—Ç—å –∞–¥–º–∏–Ω–∞

1. –£–∑–Ω–∞–π—Ç–µ User ID –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞
2. –û—Ç–∫—Ä–æ–π—Ç–µ `.env`
3. –ò–∑–º–µ–Ω–∏—Ç–µ `ADMIN_USER_ID=123456789` –Ω–∞ –Ω–æ–≤—ã–π ID
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
5. –í –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏—Ç–µ: `INFO - Admin user ID set to: 987654321`

### –û—Ç–∫–ª—é—á–∏—Ç—å –∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ `.env`
2. –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ `ADMIN_USER_ID`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
4. –í –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏—Ç–µ: `WARNING - ADMIN_USER_ID not set - cache management commands will be disabled`

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã"

**–ü—Ä–∏—á–∏–Ω–∞ 1:** –í–∞—à User ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `ADMIN_USER_ID`

**–†–µ—à–µ–Ω–∏–µ:** 
1. –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π User ID —á–µ—Ä–µ–∑ @userinfobot
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–Ω —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤ `.env`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

**–ü—Ä–∏—á–∏–Ω–∞ 2:** `ADMIN_USER_ID` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ `ADMIN_USER_ID=–≤–∞—à_id` –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ö—ç—à –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:** –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –∫ API

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `Cache HIT` / `Cache MISS`
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `/cache_stats` (–µ—Å–ª–∏ –≤—ã –∞–¥–º–∏–Ω)
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `CACHE_TTL` > 0
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–°–∏–º–ø—Ç–æ–º—ã:** Rate limit –æ—à–∏–±–∫–∏ –æ—Ç –±–∏—Ä–∂

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ `CACHE_TTL` –≤ `.env`
2. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 30 —Å–µ–∫—É–Ω–¥
3. –î–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –±–æ—Ç–∞ - 60-120 —Å–µ–∫—É–Ω–¥

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [CACHE_SYSTEM.md](CACHE_SYSTEM.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∫—ç—à—É
- [CHANGELOG.md](CHANGELOG.md) - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [README.md](../README.md) - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
