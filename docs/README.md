# Funding Rate Bot üöÄ

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞–≤–æ–∫ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è (funding rates) –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –±–∏—Ä–∂–∞—Ö.

## ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ v2.0 (Async)

- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –¥–∞–Ω–Ω—ã–µ –æ—Ç –≤—Å–µ—Ö –±–∏—Ä–∂ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ **5 –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–∏—Ä–∂**: Binance, Bybit, MEXC, Gate.io, KuCoin
- ‚úÖ **–£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ funding, —Ç–æ–ø-5 —Å –±–ª–∏–∂–∞–π—à–∏–º funding
- ‚úÖ **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - SOLID, KISS, DRY –ø—Ä–∏–Ω—Ü–∏–ø—ã
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞
- ‚úÖ **–ö—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ç–∞–±–ª–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç –≤—Å–µ—Ö –±–∏—Ä–∂

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

```
funding_bot/
‚îú‚îÄ‚îÄ models.py                    # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (FundingRate, ContractInfo)
‚îú‚îÄ‚îÄ exchanges/                   # –ê–¥–∞–ø—Ç–µ—Ä—ã –±–∏—Ä–∂
‚îÇ   ‚îú‚îÄ‚îÄ base.py                 # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ   ‚îú‚îÄ‚îÄ bybit_adapter.py        # Bybit
‚îÇ   ‚îú‚îÄ‚îÄ binance_adapter.py      # Binance
‚îÇ   ‚îú‚îÄ‚îÄ mexc_adapter.py         # MEXC
‚îÇ   ‚îú‚îÄ‚îÄ gateio_adapter.py       # Gate.io
‚îÇ   ‚îú‚îÄ‚îÄ kucoin_adapter.py       # KuCoin
‚îÇ   ‚îú‚îÄ‚îÄ bitget_adapter.py       # BitGet
‚îÇ   ‚îî‚îÄ‚îÄ bingx_adapter.py        # BingX
‚îú‚îÄ‚îÄ services/                    # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ aggregator.py           # –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç –±–∏—Ä–∂
‚îÇ   ‚îî‚îÄ‚îÄ formatter.py            # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ bot.py                      # –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç
‚îî‚îÄ‚îÄ config.py                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd funding_bot
```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª:
```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Binance (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
API_KEY=your_binance_api_key
API_SECRET=your_binance_api_secret
BASE_PATH=https://fapi.binance.com

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
LOG_LEVEL=INFO
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
```

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
- `/top` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ funding rate
- `/token <SYMBOL>` - –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–æ–∫–µ–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: `/token BTC`)
- `/set_threshold <VALUE>` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ä–æ–≥ –∞–ª–µ—Ä—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `/set_threshold 0.5`)
- `/start_monitoring` - –ù–∞—á–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–∞–ª–µ—Ä—Ç—ã –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç)
- `/stop_monitoring` - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- `/status` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø —Ç–æ–∫–µ–Ω–æ–≤:**
   ```
   /top
   ```
   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ø-10 —Ç–æ–∫–µ–Ω–æ–≤ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º–∏ —Å—Ç–∞–≤–∫–∞–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è

2. **–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–æ–∫–µ–Ω—É:**
   ```
   /token BTC
   ```
   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ BTC –æ—Ç –≤—Å–µ—Ö –±–∏—Ä–∂

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã:**
   ```
   /set_threshold 0.5
   /start_monitoring
   ```
   –ë–æ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∞–ª–µ—Ä—Ç—ã –∫–æ–≥–¥–∞ funding rate –ø—Ä–µ–≤—ã—Å–∏—Ç 0.5%

## –§–æ—Ä–º–∞—Ç –∞–ª–µ—Ä—Ç–æ–≤

```
üö®**–ê–ª–µ—Ä—Ç (–û—Å—Ç–∞–ª–æ—Å—å ~10 –º–∏–Ω): COAI –Ω–∞ ASTER** (–í–∞—à –ø–æ—Ä–æ–≥: 0.5%, –í—Ä–µ–º—è: 10 –º–∏–Ω)üö®
Token: COAI (Source: ASTER) | Date (UTC+3): 25-10-2025 15:02

Exc.      | Price      | Funding   | Countd.
ASTER    | 8.21       | -0.5068%  | 00:03:00
BITMART  | 8.22       | -0.4733%  | 00:03:00
BITGET   | 8.23       | -0.4490%  | 00:03:00
BINANCE  | 8.18       | -0.4351%  | 00:03:00
...
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –±–∏—Ä–∂–∏

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–π –±–∏—Ä–∂–∏:

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∞–¥–∞–ø—Ç–µ—Ä –≤ `exchanges/`, –Ω–∞—Å–ª–µ–¥—É—è—Å—å –æ—Ç `ExchangeAdapter`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
   - `get_top_contracts(limit)` - –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ø –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - `get_funding_rate(symbol)` - –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞–≤–∫—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
   - `get_all_funding_rates()` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç–∞–≤–∫–∏
3. –î–æ–±–∞–≤—å—Ç–µ –∞–¥–∞–ø—Ç–µ—Ä –≤ `exchanges/__init__.py`
4. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ `bot.py` –≤ –º–µ—Ç–æ–¥ `_init_aggregator()`

–ü—Ä–∏–º–µ—Ä:
```python
# exchanges/newexchange_adapter.py
from exchanges.base import ExchangeAdapter
from models import FundingRate, ContractInfo

class NewExchangeAdapter(ExchangeAdapter):
    def __init__(self):
        super().__init__("NEWEXCHANGE")
        # ... –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    
    def get_funding_rate(self, symbol: str) -> Optional[FundingRate]:
        # ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
        pass
```

## –ü—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞

### SOLID

- **S**ingle Responsibility: –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
  - `ExchangeAdapter` - —Ä–∞–±–æ—Ç–∞ —Å API –±–∏—Ä–∂–∏
  - `FundingRateAggregator` - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - `MessageFormatter` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
  
- **O**pen/Closed: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –±–∏—Ä–∂–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

- **L**iskov Substitution: –í—Å–µ –∞–¥–∞–ø—Ç–µ—Ä—ã –±–∏—Ä–∂ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã

- **I**nterface Segregation: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- **D**ependency Inversion: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π (`ExchangeAdapter`), –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π

### KISS (Keep It Simple, Stupid)

- –ü—Ä–æ—Å—Ç—ã–µ, –ø–æ–Ω—è—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- –ú–∏–Ω–∏–º—É–º –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
- –Ø—Å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π

### DRY (Don't Repeat Yourself)

- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
- –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –≤ –±–∞–∑–æ–≤—ã—Ö –∫–ª–∞—Å—Å–∞—Ö
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö

```python
@dataclass
class FundingRate:
    exchange: str              # –ù–∞–∑–≤–∞–Ω–∏–µ –±–∏—Ä–∂–∏
    symbol: str               # –°–∏–º–≤–æ–ª –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
    rate: float              # –°—Ç–∞–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.0001 = 0.01%)
    price: float             # –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞
    next_funding_time: datetime  # –í—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ funding
    quote_currency: str      # –ö–æ—Ç–∏—Ä—É–µ–º–∞—è –≤–∞–ª—é—Ç–∞
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è —Å —É—Ä–æ–≤–Ω–µ–º `INFO` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `LOG_LEVEL` –≤ `.env`:
```env
LOG_LEVEL=DEBUG  # –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

## Troubleshooting

### –û—à–∏–±–∫–∞ "TELEGRAM_BOT_TOKEN not found"

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —Å–æ–∑–¥–∞–ª–∏ `.env` —Ñ–∞–π–ª –∏ –¥–æ–±–∞–≤–∏–ª–∏ –≤ –Ω–µ–≥–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:
```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç –±–∏—Ä–∂–∏

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±–∏—Ä–∂–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã. –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –±–∏—Ä–∂–∞–º–∏.

## License

MIT

## –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ç—Ä–µ–π–¥–µ—Ä–æ–≤
